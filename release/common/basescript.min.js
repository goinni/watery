(function(angular) {
    'use strict';
    angular.registerModule('iss.alert', ['app']).
    service('AlertService',['$rootScope','$timeout',function($rootScope, $timeout){
        $rootScope.alerts = [];
        /**
         * 添加
         * @param msg 提示消息
         * @param type [success,info,warning,danger]
         * @param time 自动消失时间 单位：ms (值为false时不自动关闭)
         */ 
        this.add = function(msg, type, time){
            var _this = this, t = 3000;
            if(time===false){
                //不自动关闭的盒子
                t = null;
            }else{
                //缺省时自动关闭的盒子, 默认3秒关闭提示
                t = time || 3000; //缺省时
            }
            var entity = {
                    type: type || 'success', 
                    msg: msg,
                    close: function(){
                        _this.close(this);
                    }
                };
            $rootScope.alerts.push(entity);
            //自动关闭
            if(t){
                $timeout(function(){
                    _this.close(entity)
                }, t);
            }
            return entity; //将一提示对象返回，方便在外部零活控制
        };

        /**
         * 关闭
         */
        this.close = function(alert){
            $rootScope.alerts.splice($rootScope.alerts.indexOf(alert), 1);
        };
        /**
         * 清空所有提示
         */
        this.clear = function(){
            $rootScope.alerts=[];
        }
        //成功
        this.success = function(msg,time){
            return this.add(msg,'success', time);
        }
        //危险
        this.danger = function(msg,time){
            return this.add(msg,'danger', time);
        }
        //信息
        this.info = function(msg,time){
            return this.add(msg,'info', time);
        }
        //警告
        this.warning = function(msg,time){
            return this.add(msg,'warning', time);
        }

        /**
         * 全屏
         * @param element 
         */
        this.launchFullscreen = function (ele) {
            //按要求，暂时去掉
            // var element = ele || document.documentElement;//缺省时整个网页全屏
            // if(element.requestFullscreen) {
            //     element.requestFullscreen();
            // } else if(element.mozRequestFullScreen) {
            //     element.mozRequestFullScreen();
            // } else if(element.webkitRequestFullscreen) {
            //     element.webkitRequestFullscreen();
            // } else if(element.msRequestFullscreen) {
            //     element.msRequestFullscreen();
            // }
        }
    }]);

})(window.angular);


angular.registerModule('iss.pageurl.develop', ['app']).
service('DevelopUriService', function($http, $q) {
    var version = new Date().getTime();

    this.namespace = "iss.pageurl.develop";
    /**
     *  首页
     */
    this.home = '/pages/home/home.html';
    /**
     *  个人中心
     */
    this.icenter = '/pages/icenter/icenter.html';
    /**
     *  订单详情页
     */
    this.order_detail = '/pages/order/detail.html?v='+version;
    /**
     *  订单详列表页面
     */
    this.page_order_list = '/pages/order/list.html?v='+version;
    /**
     * 订单指派
     */
    this.page_order_assigning = '/pages/order/tpls/assigning.html?v='+version;
    /**
     * 订单收件 
     */
    this.page_order_delivery = '/pages/order/tpls/delivery.html?v='+version;
    /**
     * 订单流单
     */
    this.page_order_droporder = '/pages/order/tpls/drop_order.html?v='+version;
    /**
     * 订单详情-创建工单
     */
    this.page_order_createworkorder = '/pages/order/tpls/create_workorder.html?v='+version;
    /**
     * 订单详情-收取件预约
     */
    this.page_order_appointments = '/pages/order/tpls/appointments.html?v='+version;
    /**
     * 订单详情-手机号变更
     */
    this.page_order_modifymobile = '/pages/order/tpls/modify_mobile.html?v='+version;
    /**
     * 订单详情-客服取件
     */
    this.page_order_pickup = '/pages/order/tpls/pickup.html?v='+version;
    /**
     * 订单详情-补贴
     */
    this.page_order_subsidy = '/pages/order/tpls/subsidy.html?v='+version;
    /**
     * 订单详情-处罚
     */
    this.page_order_punishment = '/pages/order/tpls/punishment.html?v='+version;
    /**
     * 重新推单
     */
    this.page_second_pushorder = '/pages/order/tpls/page_second_pushorder.html?v='+version;
    /**
     * 合并订单
     */
    this.page_merge_order = '/pages/order/tpls/merge_order.html?v='+version;
    /**
     * 订单详情-积分确认
     */
    this.page_order_sure_score = '/pages/order/tpls/order_sure_score.html?v='+version;
    /**
     * 订单详情-积分调整
     */
    this.page_order_change_score = '/pages/order/tpls/order_change_score.html?v='+version;
    /**
     *  闪送员档案
     */
    this.page_courier_info = '/pages/courier/courier.html?v='+version;


// ------------------------------------------------------------------------
//                      ---| 下面是请求 |---
// ------------------------------------------------------------------------
    /**
     *  登录请求地址
     */
    this.action_login = '/tempdata/login.json?v='+version;
    /**
     *  退出登录
     */
    this.action_login_out = '/tempdata/login_out.json?v='+version;
    /**
     *  订单详情-基础信息
     */
    this.action_orderdetial_custommer = '/tempdata/order_detial_customer_info.json?v='+version;
    /**
     *  订单详情-工单信息
     */
    this.action_orderdetial_workorder = '/tempdata/order_detial_workorderlist.json?v='+version;
    /**
     * 订单详情-收取件预约
     */
    this.action_order_appointment = '/tempdata/action_order_appointment.json?v='+version;
    /**
     * 订单详情-手机号变更
     */
    this.action_order_mobilechange = '/tempdata/action_order_mobilechange.json?v='+version;
    /**
     * 订单详情-客服收件
     */
    this.action_order_delivery = '/tempdata/action_order_delivery.json?v='+version;
    /**
     * 订单详情-客服取件
     */
    this.action_order_pickup = '/tempdata/action_order_pickup.json?v='+version;
    /**
     * 订单详情-订单指派
     */
    this.action_order_assigning = '/tempdata/action_order_assigning.json?v='+version;
    /**
     * 订单详情-订单流单
     */
    this.action_order_droporderabort = '/tempdata/action_order_droporderabort.json?v='+version;
    /**
     * 订单详情-订单补贴
     */
    this.action_order_subsidymain = '/tempdata/action_order_subsidymain.json?v='+version;
    /**
     * 重新推单
     */
    this.action_second_pushorder = '/tempdata/action_second_pushorder.json?v='+version;
    /**
     * 并单
     */
    this.action_merge_order = '/tempdata/action_merge_order.json?v='+version;
    /**
     * 订单详情-积分调整
     */
    this.action_order_score = '/tempdata/action_order_score.json?v='+version;
    
    /**
     * 闪送员订单信息
     */
    this.action_courier_orderInfo = '/tempdata/action_courier_orderInfo.json?v='+version;
    /**
     * 订单详情-闪送员处罚
     */
    this.action_order_punishment = '/tempdata/action_courier_punishment.json?v='+version;
    /**
     * 订单详情-闪送员处罚-类型
     */
    this.action_order_punishment_type = '/tempdata/action_courier_punishment_type.json?v='+version;
    /**
     *  工单列表
     */
    this.action_workorder_list = '/tempdata/workorder_list.json?v='+version;
    /**
     * 工单列表-领单
     */
    this.action_workorder_list_catchOrder = '/tempdata/workorder_list_catchOrder.json?v='+version;
    /**
     *  闪送员档案 - 基础信息
     */
    this.action_courier_info = '/tempdata/courier_info.json?v='+version;
    /**
     *  闪送员档案 - 提现记录
     */
    this.action_courier_present_record = '/tempdata/action_courier_present_record.json?v='+version;
    /**
     *  闪送员档案 - 收支明细
     */
    this.action_courier_lossdetail = '/tempdata/action_courier_lossdetail.json?v='+version;
    /**
     *  获取订单分页列表
     */
    this.action_orderlist = '/tempdata/orderlist.json?v='+version;
    /**
     *  搜索条上所有城市列表
     */
    this.action_citylist = '/tempdata/citys.json?v='+version;
    /**
     *  搜索条上所有用户类型
     */
    this.searchBarUsertypelist = '/tempdata/searchBarUsertypelist.json?v='+version;
    /**
     *  搜索条上所有渠道
     */
    this.action_searchBarChannellist = '/tempdata/searchBarChannellist.json?v='+version;
    /**
     *  搜索条上所有交通工具
     */
    this.action_searchBarTrafficlist = '/tempdata/searchBarTrafficlist.json?v='+version;
    /**
     *  搜索条上所有其它查询条件，如：系统单号等
     */
    this.searchBarOtherlist = '/tempdata/searchBarOtherlist.json?v='+version;
    /**
     *  订单详情-补贴-补贴用户类型
     */
    this.action_subsidy_usertype = '/tempdata/subsidy_usertype.json?v='+version;
    /**
     *  订单详情-补贴-补贴类型
     */
    this.action_subsidy_type = '/tempdata/subsidy_type.json?v='+version;
    /**
     *  订单详情-补贴-补贴收款账户类型
     */
    this.action_subsidy_moneytype = '/tempdata/subsidy_moneytype.json?v='+version;
    /**
     * 订单详情-补贴-扣款类型
     */
    this.action_subsidy_courierDebit = '/tempdata/action_subsidy_courierDebit.json?v='+version;
    /**
     * 订单详情-投诉信息列表
     */
    this.action_order_complaints = '/tempdata/action_order_complaints.json?v='+version;

    /*****************************************************************/
    /**
     * 工单弹屏页
     */
    this.page_ticket_eject = '/pages/workorder/eject.html?v='+version;
    /**
     * 我的工单
     */
    this.page_my_ticket = '/pages/workorder/myTicket.html?v='+version;
    /**
     * 工单详情页
     */
    this.page_ticket_detail = '/pages/workorder/detail.html?v='+version;
    /**
     * 工单列表
     */
    this.page_ticket_list = '/pages/workorder/list.html?v='+version;
    /**
     * 订单地图页
     */
    this.page_order_map = '/pages/workorder/orderMap.html?v='+version;
    /**
     * 轨迹地图页
     */
    this.page_trail_map = '/pages/workorder/trailMap.html?v='+version;
    /**
     * 待抢单
     */
    this.page_waitingGrab = '/pages/order/waitingGrab.html?v='+version;
    /**
     * 取消单
     */
    this.page_cancel = '/pages/order/cancel.html?v='+version;
    /**
     * 新建工单模态
     */
    this.page_new_work_order = '/pages/workorder/tpls/newWorkOrder.html?v='+version;
    /**
     * 绑定用户编辑页
     */
    this.page_edit_binding_user = '/pages/fragment/tpls/editBindingUser.html?v='+version;
    /**
     * 数据报表
     */
    // this.page_ticket_amount_monitor = '/pages/fragment/tpls/page_ticket_amount_monitor.html?v='+version;
    this.page_timespan_monitor = '/pages/fragment/timespan_monitor.html?v='+version;
    this.page_ticket_detail_monitor = '/pages/fragment/ticket_detail_monitor.html?v='+version;
    this.page_waiting_grab_ticket_monitor = '/pages/fragment/waiting_grab_ticket_monitor.html?v='+version;
    this.page_waiting_grab_working_monitor = '/pages/fragment/waiting_grab_working_monitor.html?v='+version;
    this.page_ticket_statistic = '/pages/fragment/ticket_statistic.html?v='+version;
    /**
     * 用户信息
     */
    this.page_userProfile = '/pages/fragment/userProfile.html?v='+version;
    /**
     * 工单备注
     */
    this.page_orderRemark = '/pages/order/tpls/orderRemark.html?v='+version;
    /*****************************************************************/
    /**
     * 登录获取合力账号
     */
    this.action_initPhonebar = '/tempdata/initPhonebar.json?v='+version;
    /**
     * 工单弹屏
     */
    this.action_ticketEject = '/tempdata/ticketEject.json?v='+version;
    this.action_saveTicketUser = '/tempdata/saveTicketUser.json?v='+version;
    /**
     * 工单三级级联操作数据 
     */
    this.action_ticket_cascade = '/tempdata/action_ticket_cascade.json?v='+version;
    /**
     * 工单详情
     */
    this.action_workOrderDetail = '/tempdata/ticketDetail.json?v='+version;
    /**
     * 工单维护
     */
    this.action_saveTicket = '/tempdata/action_save_ticket.json?v='+version;
    this.action_updateTicket = '/tempdata/updateTicketStatusById.json?v='+version;
    this.action_cascade = '/tempdata/cascade.json?v='+version;
    this.action_showTicketType = '/tempdata/ticketTypeList.json?v='+version;
    this.action_saveTicketType = '/tempdata/updateTicketStatusById.json?v='+version;
    this.action_delTicketType = '/tempdata/updateTicketStatusById.json?v='+version;
    /**
     * 地图
     */
    this.action_mapInfo = '/tempdata/orderMap.json?v='+version;
    this.action_trailInfo = '/tempdata/action_trailInfo.json?v='+version;
    this.action_trail_points = '/tempdata/action_trail_points.json?v='+version;
    this.action_markAsAvailable = '/tempdata/markAsAvailable.json?v='+version;
    this.action_markAsUnavailable = '/tempdata/markAsUnavailable.json?v='+version;
    this.action_orderAssign = '/tempdata/markAsUnavailable.json?v='+version;
    this.action_finishPending = '/tempdata/finishPending.json?v='+version;
    /**
     * 账号绑定信息
     */
    this.action_showBindingUser = '/tempdata/bindingUserList.json?v='+version;
    this.action_showBindingUserById = '/tempdata/editBindingUser.json?v='+version;
    this.action_saveBindingUser = '/tempdata/markAsAvailable.json?v='+version;
    this.action_delBindingUser = '/tempdata/markAsAvailable.json?v='+version;
    /**
     * 我的工单
     */
    this.action_myTicket = '/tempdata/myTicket.json?v='+version;
    /**
     * 待抢单和取消单
     */
    this.action_pickupPending = '/tempdata/waitingGrabOrderGet.json?v='+version;
    this.action_showPending = '/tempdata/waitingGrabOrderList.json?v='+version;
    this.action_finishPending = '/tempdata/waitingGrabOrderFinish.json?v='+version;
    this.action_pickupComplain = '/tempdata/cancelOrderGet.json?v='+version;
    this.action_showComplain = '/tempdata/cancelOrderList.json?v='+version;
    /**
     * 数据报表
     */
    //this.action_ticketAmountMonitor = uri('/pages/fragment/tpls/page_ticket_amount_monitor.html');
    this.action_timespanMonitor = '/tempdata/timespanMonitor.json?v='+version;
    this.action_ticketDetailMonitor = '/tempdata/ticketDetailMonitor.json?v='+version;
    this.action_waitingGrabMonitor = '/tempdata/waitingGrabMonitor0.json?v='+version;
    this.action_ticketStatisticModel = '/tempdata/ticketStatisticModel.json?v='+version;
    this.action_ticketStatisticData = '/tempdata/ticketStatisticData.json?v='+version;
    /**
     * 用户信息
     */
    this.action_userProfile = '/tempdata/userProfile.json?v='+version;
    /**
     * 订单备注
     */
    this.action_orderRemark = '/tempdata/orderRemark.json?v='+version;
    /*****************************************************************/
});

angular.registerModule('iss.pageurl.online', ['app']).
service('OnlineUriService', function($http, $q,$window) {
    //构造url
    //@param n true 不加host
    function uri(url, n){
        var loc = $window.document.location;
            curl = loc.href,
            path = loc.pathname,
            pos = curl.indexOf(path),
            localhost = curl.substring(0, pos),
            time = new Date().getTime();
            //构造完整URI
            localhost = (!n ? localhost : '') + url;

        return (localhost + '?v=' + time);
    }
    //命名空间
    this.namespace = "iss.pageurl.online";
    /**
     *  首页
     */
    this.home = uri('/pages/home/home.html');
    /**
     *  个人中心
     */
    this.icenter = uri('/pages/icenter/icenter.html');
    /**
     *  订单详情页
     */
    this.order_detail = uri('/pages/order/detail.html');
    /**
     *  订单详列表页面
     */
    this.page_order_list = uri('/pages/order/list.html');
    /**
     * 订单指派
     */
    this.page_order_assigning = uri('/pages/order/tpls/assigning.html');
    /**
     * 订单收件
     */
    this.page_order_delivery = uri('/pages/order/tpls/delivery.html');
    /**
     * 订单流单
     */
    this.page_order_droporder = uri('/pages/order/tpls/drop_order.html');
    /**
     * 订单详情-创建工单
     */
    this.page_order_createworkorder = uri('/pages/order/tpls/create_workorder.html');
    /**
     * 订单详情-收取件预约
     */
    this.page_order_appointments = uri('/pages/order/tpls/appointments.html');
    /**
     * 订单详情-手机号变更
     */
    this.page_order_modifymobile = uri('/pages/order/tpls/modify_mobile.html');
    /**
     * 订单详情-客服取件
     */
    this.page_order_pickup = uri('/pages/order/tpls/pickup.html');
    /**
     * 订单详情-补贴
     */
    this.page_order_subsidy = uri('/pages/order/tpls/subsidy.html');
    /**
     * 订单详情-处罚
     */
    this.page_order_punishment = uri('/pages/order/tpls/punishment.html');
    /**
     * 合并订单
     */
    this.page_merge_order = uri('/pages/order/tpls/merge_order.html');
    /**
     * 订单详情-积分确认
     */
    this.page_order_sure_score = uri('/pages/order/tpls/order_sure_score.html');
    /**
     * 订单详情-积分调整
     */
    this.page_order_change_score = uri('/pages/order/tpls/order_change_score.html');
    /**
     * 重新推单
     */
    this.page_second_pushorder = uri('/pages/order/tpls/page_second_pushorder.html');
    /**
     *  闪送员档案
     */
    this.page_courier_info = uri('/pages/courier/courier.html');
    /**
     * 用户信息
     */
    this.page_userProfile = uri('/pages/fragment/userProfile.html');

// ------------------------------------------------------------------------
//                      ---| 下面是请求 |---
// ------------------------------------------------------------------------
    /**
     *  登录请求地址  done
     */
    this.action_login = uri('/admin/login');
    /**
     *  退出登录
     */
    this.action_login_out = uri('/admin/logout');
    /**
     *  订单详情-基础信息 done
     */
    this.action_orderdetial_custommer = uri('/admin/order/detail/{orderNumber}');
    /**
     *  订单详情-工单信息 done
     */
    this.action_orderdetial_workorder = uri('/admin/ticket/queryTicketByOrderNumber');
    /**
     * 订单详情-收取件预约
     */
    this.action_order_appointment = uri('/admin/op/appointment');
    /**
     * 订单详情-手机号变更
     */
    this.action_order_mobilechange = uri('/admin/op/change');
    /**
     * 订单详情-客服收件
     */
    this.action_order_delivery = uri('/admin/op/delivery');
    /**
     * 订单详情-客服取件
     */
    this.action_order_pickup = uri('/admin/op/pickup');
    /**
     * 订单详情-订单指派
     */
    this.action_order_assigning = uri('/admin/op/assign');
    /**
     * 订单详情-订单流单
     */
    this.action_order_droporderabort = uri('/admin/op/abort');
    /**
     * 订单详情-订单补贴
     */
    this.action_order_subsidymain = uri('/admin/op/subsidy');
    /**
     * 重新推单
     */
    this.action_second_pushorder = uri('/admin/op/repush');
    /**
     * 并单
     */
    this.action_merge_order = uri('/admin/op/merge');
    /**
     * 订单详情-积分调整
     */
    this.action_order_score = uri('/admin/op/score');
    /**
     * 闪送员订单信息
     */
    this.action_courier_orderInfo = uri('/admin/op/checkCourier');
    /**
     *  工单列表 done
     */
    this.action_workorder_list = uri('/admin/ticket/list');
    /**
     * 工单列表-领单
     */
    this.action_workorder_list_catchOrder = uri('/admin/ticket/collarTicket');
    
    /**
     *  获取订单分页列表 done
     */
    this.action_orderlist = uri('/admin/order/list');
    /**
     *  闪送员档案 - 基础信息 done
     */
    this.action_courier_info = uri('/admin/courier/info');
    /**
     *  闪送员档案 - 提现记录
     */
    this.action_courier_present_record = uri('/admin/courier/withdrawDetails');
    /**
     *  闪送员档案 - 收支明细
     */
    this.action_courier_lossdetail = uri('/admin/courier/accountDetails');
    /**
     *  搜索条上所有城市列表 done
     */
    this.action_citylist = uri('/admin/cityList');
    /**
     *  搜索条上所有用户类型
     */
    this.searchBarUsertypelist = uri('/tempdata/searchBarUsertypelist.json',true);
    /**
     *  搜索条上所有渠道 done
     */
    this.action_searchBarChannellist = uri('/admin/orderChannel');
    /**
     *  搜索条上所有交通工具 done
     */
    this.action_searchBarTrafficlist = uri('/admin/travelWay');
    /**
     *  搜索条上所有其它查询条件，如：系统单号等 done
     */
    this.searchBarOtherlist = uri('/admin/search');
    /**
     *  订单详情-补贴-补贴用户类型
     */
    this.action_subsidy_usertype = uri('/admin/subsidyType');
    /**
     *  订单详情-补贴-补贴类型
     */
    this.action_subsidy_type = uri('/admin/courierSubsidy');
    /**
     *  订单详情-补贴-补贴收款账户类型
     */
    this.action_subsidy_moneytype = uri('/admin/drawSubsidy');
    /**
     * 订单详情-补贴-扣款类型
     */
    this.action_subsidy_courierDebit = uri('/admin/courierDebit');
    /**
     * 订单详情-闪送员处罚
     */
    this.action_order_punishment = uri('/admin/rank/punish');
    /**
     * 订单详情-闪送员处罚-类型
     */
    this.action_order_punishment_type = uri('/admin/rank/queryPunishRuleByType');
    /**
     * 订单详情-投诉信息列表
     */
    this.action_order_complaints = uri('/admin/rank/list');

    /*****************************************************************/
    /**
     * 工单弹屏页
     */
    this.page_ticket_eject = uri('/pages/workorder/eject.html');
    /**
     * 我的工单
     */
    this.page_my_ticket = uri('/pages/workorder/myTicket.html');
    /**
     * 工单详情页
     */
    this.page_ticket_detail = uri('/pages/workorder/detail.html');
    /**
     * 工单列表
     */
    this.page_ticket_list = uri('/pages/workorder/list.html');
    /**
     * 订单地图页
     */
    this.page_order_map = uri('/pages/workorder/orderMap.html');
    /**
     * 轨迹地图页
     */
    this.page_trail_map = uri('/pages/workorder/trailMap.html');
    /**
     * 待抢单
     */
    this.page_waitingGrab = uri('/pages/order/waitingGrab.html');
    /**
     * 取消单
     */
    this.page_cancel = uri('/pages/order/cancel.html');
    /**
     * 新建工单模态
     */
    this.page_new_work_order = uri('/pages/workorder/tpls/newWorkOrder.html');
    /**
     * 系统设置
     */
    this.page_binding_user_list = uri('/pages/fragment/bindingUser.html');
    this.page_edit_binding_user = uri('/pages/fragment/tpls/editBindingUser.html');
    this.page_ticket_type_list = uri('/pages/fragment/ticketType.html');
    this.page_edit_ticket_type = uri('/pages/fragment/tpls/editTicketType.html');
    /**
     * 数据报表
     */
    // this.page_ticket_amount_monitor = uri('/pages/fragment/tpls/page_ticket_amount_monitor.html');
    this.page_timespan_monitor = uri('/pages/fragment/timespan_monitor.html');
    this.page_ticket_detail_monitor = uri('/pages/fragment/ticket_detail_monitor.html');
    this.page_waiting_grab_ticket_monitor = uri('/pages/fragment/waiting_grab_ticket_monitor.html');
    this.page_waiting_grab_working_monitor = uri('/pages/fragment/waiting_grab_working_monitor.html');
    this.page_ticket_statistic = uri('/pages/fragment/ticket_statistic.html');
    /**
     * 用户信息
     */
    this.page_userProfile = uri('/pages/fragment/userProfile.html');
    /**
     * 工单备注
     */
    this.page_orderRemark = uri('/pages/order/tpls/orderRemark.html');
    /*****************************************************************/
    /**
     * 登录获取合力账号
     */
    this.action_initPhonebar = uri('/admin/bindingUser/findByLoginName');
    /**
     * 工单弹屏
     */
    this.action_ticketEject = uri('/admin/ticket/index');
    this.action_saveTicketUser = uri('/admin/ticket/saveTicketUser');
    /**
     * 工单三级级联操作数据 
     */
    this.action_ticket_cascade = uri('/admin/ticket/queryTicketQaGroupsByPid');
    /**
     * 工单详情
     */
    this.action_workOrderDetail = uri('/admin/ticket/detail');
    /**
     * 工单维护
     */
    this.action_saveTicket = uri('/admin/ticket/saveTicket');
    this.action_updateTicket = uri('/admin/ticket/updateTicketStatusById');
    this.action_cascade = uri('/admin/ticket/queryTicketQaGroupsByPid');
    this.action_showTicketType = uri('/admin/question/query_question');
    this.action_saveTicketType = uri('/admin/question/merge_question');
    this.action_delTicketType = uri('/admin/question/delete_question');
    /**
     * 地图
     */
    this.action_mapInfo = uri('/admin/map/page');
    this.action_trailInfo = uri('/admin/map/trail');
    this.action_trail_points = uri('/tempdata/action_trail_points.json');
    this.action_markAsAvailable = uri('/admin/map/available');
    this.action_markAsUnavailable = uri('/admin/map/unavailable');
    this.action_orderAssign = uri('/admin/op/assign');
    this.action_finishPending = uri('/admin/order/finishPending');
    /**
     * 账号绑定信息
     */
    this.action_showBindingUser = uri('/admin/bindingUser/pageList');
    this.action_showBindingUserById = uri('/admin/bindingUser/findById');
    this.action_saveBindingUser = uri('/admin/bindingUser/save');
    this.action_delBindingUser = uri('/admin/bindingUser/delete/');
    /**
     * 我的工单
     */
    this.action_myTicket = uri('/admin/ticket/queryMyTicketByStatus');
    /**
     * 待抢单和取消单
     */
    this.action_pickupPending = uri('/admin/order/pickupPending');
    this.action_showPending = uri('/admin/order/showPending');
    this.action_finishPending = uri('/admin/order/finishPending');
    this.action_pickupComplain = uri('/admin/order/pickupComplain');
    this.action_showComplain = uri('/admin/order/showComplain');
    /**
     * 数据报表
     */
    //this.action_ticketAmountMonitor = uri('/pages/fragment/tpls/page_ticket_amount_monitor.html');
    this.action_timespanMonitor = uri('/admin/monitor/timespan-monitor');
    this.action_ticketDetailMonitor = uri('/admin/monitor/workOrder-detail');
    this.action_waitingGrabMonitor = uri('/admin/quality_control/show_data');
    /**
     * 用户信息
     */
    this.action_userProfile = uri('/admin/invoice/findByMobile');
    /**
     * 订单备注
     */
    this.action_orderRemark = uri('/admin/rank/remark');
    /*****************************************************************/

});
angular.registerModule('iss.paging', ['app']).
service('PagingService', function($http, $q) {

    // total-items="100" max-size="6" ng-model="currentPage" ng-change="pageChanged()"
    this.pagingEntity = {
        row: 10,//每页显示10条记录
        totalItems: 100,  //总记录数
        maxSize: 5,     //分页条上最多显示5个页码
        currentPage: 1  //当前页码
    }
    /**
     * 重置分页信息
     */
    this.resetPaging = function(scope){
        scope.data.paging = {
            row: 10,    //每页显示10条记录
            totalItems: 0,  //总记录数
            maxSize: 5,     //分页条上最多显示5个页码
            currentPage: 1,  //当前页码
            changed: function(){} //分页事件
        }
    }
    /** 
     * 设置分页信息
     */
    this.setPaging = function(scope, opt){
            var paging = scope.data.paging;
            paging.row = opt.row || paging.row;
            paging.totalItems = opt.totalItems || paging.totalItems;
            paging.maxSize = opt.maxSize || paging.maxSize;
            paging.currentPage = opt.currentPage || paging.currentPage;
            paging.changed = opt.changed || paging.changed;
    }

});
angular.registerModule('iss.pageurl', ['app']).
service('UriService', function($state, $log, $http, $q, isDevelop, OnlineUriService, DevelopUriService) {
    var _this = this;
    /**
     * develop or online!
     */
    (function(){
        var uris = OnlineUriService || [];
        if(isDevelop){ 
            uris = DevelopUriService; 
        }
        angular.forEach(uris, function(data,index){
            _this[index] = data;
        });
        $log.warn('is develop',isDevelop);
    })();
    /**
     * ajax request
     * opt = {
     *      method: 'GET',      // 请求的方法缺省为POST，当为isDevelop 为true时 请求方法为GET
     *      url: 'jerry.com',   // 请求地址
     *      data: {},            // 请求时的参数
     *      restdata: {ordernumber:'DDH00011'}   //rest请求风格对应的URL参数 URL用{name}进行占位，占位名字与对象名字一一对应
     * }
     */
    this.send = function(opt){
        var deferred = $q.defer();
        var restdata = opt.restdata || {};
        var method = opt.method || 'POST';
        if(isDevelop || opt.url.match(/.json/)){method = "GET"};
        //rest style
        var tempUrl = opt.url;
        for(var key in restdata){
            // console.log(restdata[key],key)
            var x = '{'+key+'}';
            tempUrl = tempUrl.replace(x,restdata[key]);
        }   
        opt.url = tempUrl;
        //requeset server
        $http({
             method: method,
             url: opt.url || '',
             data: opt.data || {},
        }).success(function(data){
            if(data.status == 401){
                // console.log(data.status,opt);
                // 401 is no login .
                $log.warn(data.err); // tip
                $state.go('login'); // go!
            }
            deferred.resolve(data);
        }).error(function(){
          deferred.reject("Request service error !");
        });
        return deferred.promise;
    }
});